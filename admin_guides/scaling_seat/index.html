<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Scaled SeAT Deployments - SeAT Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Scaled SeAT Deployments";
    var mkdocs_page_input_path = "admin_guides/scaling_seat.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> SeAT Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">General</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../contact/">Contact</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../reporting_bugs/">Reporting Bugs</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../community_packages/">Community Packages</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Installation Guides</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../installation_guides/getting_started/">Getting Started</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../installation_guides/quick_install/">Quick Install</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../installation_guides/generic_installation/">Generic Installation</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../installation_guides/centos6/">CentOS 6.x</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../installation_guides/centos7/">CentOS 7.x</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../installation_guides/ubuntu16x/">Ubuntu 16.x</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../installation_guides/developer_installation/">Development Project</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Upgrade Guides</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../upgrade_guides/general_upgrades/">General Upgrades</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../upgrade_guides/seat1_to_2/">SeAT 1.x to SeAT 2.0</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Email</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../email/mailgun/">Mailgun Setup</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../email/gmail/">Gmail Setup</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Admin Guides</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../sso/">Configuring Eve Online SSO</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Scaled SeAT Deployments</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#server">server</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#seat-component">seat component</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../rbac/">Role Based Access Control</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../tracking/">Understanding Tracking</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../seat_supervisor/">SeAT & Supervisor Integration</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../eveapi_admin_contact/">EVE Api Administrative Contact</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">SeAT API</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../seat_api/overview/">Overview</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../seat_api/eve_api_keys/">EVE Api Keys</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../seat_api/seat_users/">SeAT Users</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../seat_api/roles_permissions/">SeAT Roles, Permissions and Authorization</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../seat_api/characters/">Characters</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../seat_api/corporations/">Corporations</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Changelogs</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../changelogs/api/">Api</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../changelogs/console/">Console</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../changelogs/eveapi/">Eveapi</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../changelogs/notifications/">Notifications</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../changelogs/services/">Services</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../changelogs/web/">Web</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Package Configurations</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../configuration/overview/">Overview</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../configuration/api/">Api</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../configuration/console/">Console</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../configuration/eveapi/">Eveapi</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../configuration/notifications/">Notifications</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../configuration/service/">Service</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../configuration/web/">Web</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../configuration/other/">Other</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Eve XML API Updater</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../eve_xml_api_updater/job_queue_flow/">Job Queue Flow</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Developing For SeAT</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../development/general/">General Guide</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../development/package_breakdown/">Core Package Breakdown</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../development/package_development/">Package Development</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../todo/">TODO List</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">SeAT Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Admin Guides &raquo;</li>
        
      
    
    <li>Scaled SeAT Deployments</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/eveseat/docs/edit/master/docs/admin_guides/scaling_seat.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p><img alt="SeAT" src="http://i.imgur.com/aPPOxSK.png" /></p>
<p>At some stage, you may come to a point where a single install of SeAT might not be enough to process api key updates. Thankfully, it is actually very easy to scale SeAT horizontally in order to improve performance.
This document aims to share some <em>need to knows</em> before embarking on a tiered installation of SeAT.</p>
<h2 id="definitions">definitions</h2>
<p>Lets get some definitions cleared up.</p>
<h3 id="server">server</h3>
<p>A <em>server</em> is defined as any VPS, hardware, docker container, or other form of virtualization. When talking performance though, keep in mind that there will probably be very little performance gains when everything runs on the same physical hardware instance.</p>
<h3 id="seat-component">seat component</h3>
<p>A <em>SeAT Component</em> is a collection of SeAT packages and configurations that is responsible for performing a specific task. Tasks include the SeAT Web Interface, the job workers or dispatchers.</p>
<h2 id="components">components</h2>
<p>Before we can talk scale, we need to understand which components SeAT actually consists of. We will not talk about the <a href="#immutable-resources">immutable resources</a> here as they will be mentioned in the next section.</p>
<p>So, which components are there to SeAT?</p>
<ul>
<li>The web front end.</li>
<li>The queue workers.</li>
<li>The job dispatcher.</li>
</ul>
<p>Each of these components can live on their own <a href="#server">server</a> and must share the same <a href="#immutable-resources">immutable resources</a>.</p>
<h2 id="immutable-resources">immutable resources</h2>
<p>While almost every component in SeAT can 'run on its own', there are some services that SeAT consumes that SeAT can not scale itself. Instead, SeAT can consume a clustered or load balanced instance of these services. There are various reasons for this where the most important is that state is maintained between queue workers using Redis and MySQL.</p>
<p>Services that should be shared between all SeAT components are:</p>
<ul>
<li>The Redis cache.</li>
<li>The MySQL database.</li>
</ul>
<p>When mentioning these components, they can definitely exist in their clustered/load balanced forms. For Redis, have a look at their <a href="https://redis.io/topics/cluster-tutorial">Redis cluster tutorial</a> and for MySQL, you can have a look at their <a href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-installation.html">MySQL cluster installation</a> documentation, or maybe resort to just setting up plain <a href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-replication-multi-master.html">master-master replication</a>.</p>
<h2 id="simple-scaled-setup">simple scaled setup</h2>
<p>The following example setup is probably the most simple option to gain performance improvements by scaling out. The gist of it is that we simply add more <em>queue worker</em> components to the SeAT setup.</p>
<p>Lets start by taking a look at a diagram, showing the extra <em>queue worker</em> component added.</p>
<p><img alt="simple scale" src="https://i.imgur.com/y1XSxIp.png" /></p>
<p>Installing a new <a href="#server">server</a> with only the queue worker component setup can bring a significant speed boost into the environment. A new queue worker could be configured to run an extra 4-6 jobs. This queue worker must be configured to make use of the <a href="#immutable-resources">immutable resources</a>.</p>
<h2 id="more-complicated-scaled-setup">more complicated scaled setup</h2>
<p>Of course, one can totally go full nelson and explode all of the components in use. Below is an example deployment (with data flow links, red for redis, blue for mysql) that shows how each SeAT component can live on its own server.</p>
<p><img alt="complex scale" src="https://i.imgur.com/ZvCYCCE.png" /></p>
<h2 id="component-setups">component setups</h2>
<p>Lets talk about component configurations quickly. Apart from the <a href="#immutable-resources">immutable resources</a>, all of the software needed can be sourced from SeAT packages. All of the standard requirements such as PHP7 and Supervisor 3 also apply. However, not all components would need a web server for example.</p>
<p>Below are the descriptions (and short requirements list) for the different SeAT components.</p>
<h3 id="web-front-end">web front end</h3>
<p>To setup a web front end component, use the following steps:</p>
<ul>
<li>Ensure you have at least PHP7 installed.</li>
<li>Ensure that you have a web server installed that can serve the <code>public/</code> directory from the SeAT project.</li>
<li>Ensure that you have <code>composer</code> installed and available in <code>PATH</code>.</li>
<li>Download SeAT somewhere like <code>/var/www/seat</code> using <code>composer create-project eveseat/seat /var/www/seat --no-dev</code>.</li>
<li>Once installed, configure the <code>.env</code> files database and Redis settings to connect to your <a href="#immutable-resources">immutable sources</a>.</li>
</ul>
<h3 id="queue-worker">queue worker</h3>
<p>To setup a queue worker component, use the following steps:</p>
<ul>
<li>Ensure you have at least PHP7 installed.</li>
<li>Ensure that you have supervisor3 installed.</li>
<li>Ensure that you have <code>composer</code> installed and available in <code>PATH</code>.</li>
<li>Download SeAT somewhere using <code>composer create-project eveseat/seat --no-dev</code>.</li>
<li>Once installed, configure the <code>.env</code> files database and Redis settings to connect to your <a href="#immutable-resources">immutable sources</a>.</li>
<li>Configure the workers in a <code>seat.ini</code> file for supervisor to start.</li>
</ul>
<h3 id="job-dispatcher">job dispatcher</h3>
<p>To setup a job dispatcher component, use the following steps:</p>
<ul>
<li>Ensure you have at least PHP7 installed.</li>
<li>Ensure that you have <code>composer</code> installed and available in <code>PATH</code>.</li>
<li>Download SeAT somewhere like <code>/var/www/seat</code> using <code>composer create-project eveseat/seat /var/www/seat --no-dev</code>.</li>
<li>Once installed, configure the <code>.env</code> files database and Redis settings to connect to your <a href="#immutable-resources">immutable sources</a>.</li>
<li>Setup the cronjob to run <code>php artisan schedule:run 1&gt;&gt; /dev/null 2&gt;&amp;1</code> every minute.</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../rbac/" class="btn btn-neutral float-right" title="Role Based Access Control">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../sso/" class="btn btn-neutral" title="Configuring Eve Online SSO"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/eveseat/docs/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../sso/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../rbac/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
